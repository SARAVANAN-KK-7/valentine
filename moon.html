/* Typing */
function typeText(text,callback){
  sequence.innerHTML="";
  let i=0;
  let interval=setInterval(()=>{
    sequence.innerHTML+=text.charAt(i);
    i++;
    if(i>=text.length){
      clearInterval(interval);
      if(callback) callback();
    }
  },40);
}

yesBtn.addEventListener("click",()=>{

  yesBtn.style.display="none";
  noBtn.style.display="none";
  finalMsg.style.display="block";

  typeText("Don't Worry MeenakshiðŸ˜…, I won't take this as your DECISIONðŸ˜œ",()=>{

    mainTitle.classList.add("fade-out");

    setTimeout(()=>{
      typeText("I want to say something...",()=>{

        setTimeout(()=>{
          typeText("Na Itha soLliYe aaganum....",()=>{

            let btn=document.createElement("button");
            btn.innerText="Enna??";
            btn.className="extra-btn";
            extra.appendChild(btn);

            btn.onclick=()=>{
              extra.innerHTML="";

              typeText("Sometimes my HEART FEELS SPECIALâœ¨ when my BRAIN THINKS about U.....",()=>{

                setTimeout(()=>{
                  typeText("Appo Enakkulla Oru MUSIC kekkumâ€¦ It's an Rahman's BeautIfuL MUSICðŸŽ¶.",()=>{

                    let musicBtn=document.createElement("button");
                    musicBtn.innerText="MUSIC??";
                    musicBtn.className="extra-btn";
                    extra.appendChild(musicBtn);

                    musicBtn.onclick=()=>{

                      bgm.play();

                      let fade=setInterval(()=>{
                        if(bgm.volume<0.6){
                          bgm.volume+=0.02;
                        }else clearInterval(fade);
                      },200);

                      bgm.onended=function(){

                        musicBtn.remove();  /* ðŸ”¥ remove music button */

                        typeText("It's a second most beautiful thing after U.....",()=>{

                          setTimeout(()=>{
                            sequence.innerHTML=
                            "Silence doesnâ€™t mean the feeling fadedâ€¦<br>sometimes itâ€™s growing quietly.";

                            setTimeout(()=>{
                              typeText("If someday it feels rightâ€¦ we wonâ€™t need explanationsðŸŒ™",()=>{

                                setTimeout(()=>{
                                  typeText("Even if life gets busyâ€¦ my place for you wonâ€™t change. ðŸ’ž",()=>{

                                    setTimeout(()=>{
                                      typeText("Some stories donâ€™t need labelsâ€¦ they just need two hearts that understand. ðŸŒ™âœ¨");
                                    },5000);

                                  });
                                },5000);

                              });
                            },5000);

                          },5000);

                        });

                      };

                    };

                  });

                },5000);

              });

            };

          });
        },5000);
      });
    },5000);

  });

});
</script>

</body>
</html>